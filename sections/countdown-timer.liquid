{% schema %}
{
  "name": "Countdown Timer",
  "settings": [
    { "type": "text", "id": "end_date", "label": "End Date (YYYY-MM-DD)", "default": "2025-12-31" }
  ],
  "presets": [{ "name": "Countdown Timer" }]
}
{% endschema %}

<div id="countdown" data-end="{{ section.settings.end_date }}"></div>
<script>
  const countdown = document.getElementById('countdown');
  const endDate = new Date(countdown.dataset.end);
  function updateTimer() {
    const now = new Date();
    const diff = endDate - now;
    if (diff < 0) return countdown.innerHTML = "Expired";
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
    const mins = Math.floor((diff / (1000 * 60)) % 60);
    countdown.innerHTML = `${days}d ${hours}h ${mins}m`;
  }
  setInterval(updateTimer, 60000);
  updateTimer();
</script>